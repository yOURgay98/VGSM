@import "tailwindcss";
@import "maplibre-gl/dist/maplibre-gl.css";

/* Tailwind's default `dark:` uses prefers-color-scheme. We want an explicit app toggle. */
@custom-variant dark (&:where([data-theme="dark"], [data-theme="dark"] *));
@custom-variant gray (&:where([data-theme="gray"], [data-theme="gray"] *));

:root {
  --font-sans: var(--font-manrope);
  --radius-panel: 14px;
  --radius-control: 9px;
  --radius-window: 18px;

  --accent: #0a84ff;
  --accent-soft: color-mix(in srgb, var(--accent) 20%, transparent);
  --focus-ring: color-mix(in srgb, var(--accent) 34%, transparent);

  /* Controlled "system red" for required/security attention states. */
  --danger: #ff3b30;
  --danger-soft: color-mix(in srgb, var(--danger) 16%, transparent);
  --danger-border: color-mix(in srgb, var(--danger) 34%, transparent);
}

[data-theme="light"] {
  --bg: #eceef2;
  --bg-layer-a: rgba(255, 255, 255, 0.72);
  --bg-layer-b: rgba(214, 220, 232, 0.6);
  --window-shell: rgba(248, 249, 251, 0.58);
  --titlebar-bg: rgba(247, 248, 250, 0.75);
  --sidebar-bg: rgba(246, 247, 249, 0.62);
  --surface: rgba(255, 255, 255, 0.66);
  --surface-strong: rgba(255, 255, 255, 0.84);
  --surface-muted: rgba(255, 255, 255, 0.52);
  --text-main: #16181d;
  --text-muted: #5f6673;
  --border: rgba(17, 24, 39, 0.12);
  --border-strong: rgba(17, 24, 39, 0.18);
  --soft-border: var(--border);
  --window-shadow:
    0 22px 50px -28px rgba(15, 18, 25, 0.35), 0 12px 24px -20px rgba(15, 18, 25, 0.3);
  --panel-shadow: 0 1px 0 rgba(255, 255, 255, 0.55), 0 10px 18px -22px rgba(15, 18, 25, 0.2);
}

[data-theme="gray"] {
  --bg: #d3d4d8;
  --bg-layer-a: rgba(255, 255, 255, 0.5);
  --bg-layer-b: rgba(210, 212, 218, 0.55);
  --window-shell: rgba(244, 245, 247, 0.68);
  --titlebar-bg: rgba(243, 244, 246, 0.82);
  --sidebar-bg: rgba(241, 242, 244, 0.76);
  --surface: rgba(255, 255, 255, 0.58);
  --surface-strong: rgba(255, 255, 255, 0.76);
  --surface-muted: rgba(255, 255, 255, 0.46);
  --text-main: #1b1d22;
  --text-muted: #6b7280;
  --border: rgba(17, 24, 39, 0.14);
  --border-strong: rgba(17, 24, 39, 0.2);
  --soft-border: var(--border);
  --window-shadow:
    0 20px 46px -30px rgba(15, 18, 25, 0.32), 0 10px 20px -22px rgba(15, 18, 25, 0.22);
  --panel-shadow: 0 1px 0 rgba(255, 255, 255, 0.55), 0 8px 16px -22px rgba(15, 18, 25, 0.18);
}

[data-theme="dark"] {
  --bg: #141416;
  --bg-layer-a: rgba(48, 48, 52, 0.42);
  --bg-layer-b: rgba(28, 28, 31, 0.4);
  --window-shell: rgba(24, 24, 27, 0.74);
  --titlebar-bg: rgba(24, 24, 27, 0.82);
  --sidebar-bg: rgba(25, 25, 27, 0.8);
  --surface: rgba(33, 33, 36, 0.66);
  --surface-strong: rgba(34, 34, 36, 0.86);
  --surface-muted: rgba(37, 37, 40, 0.58);
  --text-main: #f5f5f7;
  --text-muted: #a1a1aa;
  --border: rgba(255, 255, 255, 0.1);
  --border-strong: rgba(255, 255, 255, 0.14);
  --soft-border: var(--border);
  --window-shadow: 0 22px 58px -34px rgba(0, 0, 0, 0.8), 0 12px 28px -22px rgba(0, 0, 0, 0.7);
  --panel-shadow: 0 1px 0 rgba(255, 255, 255, 0.04), 0 16px 28px -28px rgba(0, 0, 0, 0.85);
}

[data-accent="blue"] {
  --accent: #0a84ff;
}

[data-accent="teal"] {
  --accent: #1e9aa6;
}

[data-accent="graphite"] {
  --accent: #58606d;
}

* {
  box-sizing: border-box;
}

html,
body {
  margin: 0;
  min-height: 100%;
}

body {
  background:
    radial-gradient(circle at 14% -8%, var(--bg-layer-a), transparent 42%),
    radial-gradient(circle at 92% -20%, var(--bg-layer-b), transparent 40%), var(--bg);
  color: var(--text-main);
  font-family:
    var(--font-manrope),
    "SF Pro Text",
    "Segoe UI",
    system-ui,
    -apple-system,
    sans-serif;
  text-rendering: optimizeLegibility;
  transition:
    background-color 150ms ease,
    color 150ms ease;
}

.vsm-marketing {
  overflow-x: clip;
}

@supports not (overflow: clip) {
  .vsm-marketing {
    overflow-x: hidden;
  }
}

::selection {
  background: var(--accent-soft);
}

a {
  color: inherit;
  text-decoration: none;
}

html {
  color-scheme: light;
}

html[data-theme="dark"] {
  color-scheme: dark;
}

input,
textarea,
button,
select {
  font: inherit;
}

.ui-transition {
  transition:
    color 160ms ease,
    background-color 160ms ease,
    border-color 160ms ease,
    box-shadow 160ms ease,
    opacity 160ms ease,
    transform 160ms ease,
    filter 160ms ease;
}

/* Marketing UI button system (scoped to the marketing shell). */
.vsm-marketing .mkt-btn {
  display: inline-flex;
  height: 35px;
  align-items: center;
  justify-content: center;
  gap: 8px;
  border-radius: 7px;
  padding: 0 14px;
  font-size: 12px;
  font-weight: 600;
  letter-spacing: 0.02em;
  color: rgba(255, 255, 255, 0.88);
  border: 1px solid rgba(255, 255, 255, 0.08);
  background: rgba(255, 255, 255, 0.02);
  -webkit-backdrop-filter: blur(14px);
  backdrop-filter: blur(14px);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.04);
  transition:
    transform 180ms ease,
    color 180ms ease,
    filter 180ms ease,
    background-color 180ms ease,
    border-color 180ms ease,
    box-shadow 180ms ease,
    opacity 180ms ease;
}

.vsm-marketing .mkt-btn:hover {
  transform: translateY(-1px);
  filter: brightness(1.02);
  border-color: rgba(255, 255, 255, 0.13);
  background: rgba(255, 255, 255, 0.03);
}

.vsm-marketing .mkt-btn:active {
  transform: translateY(0) scale(0.98);
}

.vsm-marketing .mkt-btn:focus-visible {
  outline: none;
  box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.06);
}

.vsm-marketing .mkt-btn-primary {
  background:
    linear-gradient(180deg, rgba(255, 255, 255, 0.06) 0%, rgba(255, 255, 255, 0.01) 100%),
    linear-gradient(180deg, rgba(22, 24, 31, 0.94) 0%, rgba(12, 13, 17, 0.96) 100%);
  border-color: rgba(156, 176, 216, 0.2);
}

.vsm-marketing .mkt-btn-primary:hover {
  background:
    linear-gradient(180deg, rgba(255, 255, 255, 0.08) 0%, rgba(255, 255, 255, 0.015) 100%),
    linear-gradient(180deg, rgba(24, 27, 35, 0.94) 0%, rgba(12, 13, 17, 0.96) 100%);
  border-color: rgba(174, 196, 235, 0.3);
  box-shadow:
    0 0 0 1px rgba(170, 192, 232, 0.12),
    0 0 14px -10px rgba(133, 158, 222, 0.36);
}

.vsm-marketing .mkt-btn-secondary {
  color: rgba(255, 255, 255, 0.62);
  border-color: rgba(255, 255, 255, 0.12);
  background: transparent;
}

.vsm-marketing .mkt-btn-secondary:hover {
  color: rgba(255, 255, 255, 0.8);
  background: rgba(255, 255, 255, 0.022);
  border-color: rgba(255, 255, 255, 0.17);
}

.vsm-marketing .mkt-btn-sm {
  height: 34px;
  padding: 0 12px;
}

.vsm-marketing .mkt-link {
  font-size: 13px;
  font-weight: 600;
  color: rgba(255, 255, 255, 0.75);
  transition: color 200ms ease, text-decoration-color 200ms ease, opacity 200ms ease;
}

.vsm-marketing .mkt-link:hover {
  color: rgba(255, 255, 255, 0.95);
  text-decoration: underline;
  text-underline-offset: 4px;
  text-decoration-thickness: 1px;
}

.vsm-headline-shimmer {
  position: relative;
  display: inline-block;
  overflow: hidden;
  isolation: isolate;
  z-index: 0;
}

.vsm-headline-shimmer::after {
  content: "";
  position: absolute;
  top: -20%;
  left: -120%;
  width: 60%;
  height: 140%;
  background: linear-gradient(
    120deg,
    transparent 0%,
    rgba(255, 255, 255, 0.24) 45%,
    transparent 72%
  );
  transform: skewX(-20deg);
  mix-blend-mode: screen;
  pointer-events: none;
  opacity: 0;
  z-index: 2;
}

.vsm-headline-shimmer-text {
  position: relative;
  z-index: 1;
  display: inline-block;
}

.vsm-headline-shimmer-run::after {
  animation: vsm-headline-shimmer-sweep 1600ms ease-in-out both;
}

.input-neutral {
  border-radius: var(--radius-control);
  border: 1px solid var(--border);
  background: var(--surface-strong);
  color: var(--text-main);
  outline: none;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.35);
}

html[data-theme="dark"] .input-neutral {
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.02);
}

.input-neutral::placeholder {
  color: var(--text-muted);
  opacity: 0.85;
}

.input-neutral:focus-visible {
  border-color: color-mix(in srgb, var(--accent) 55%, transparent);
  box-shadow: 0 0 0 3px var(--focus-ring);
}

.dialog-overlay {
  opacity: 0;
  transition: opacity 160ms ease;
}

.dialog-overlay[data-state="open"] {
  opacity: 1;
}

.dialog-overlay[data-state="closed"] {
  opacity: 0;
}

.dialog-content {
  opacity: 0;
  transform: translate(-50%, -50%) scale(0.98);
  transition:
    opacity 160ms ease,
    transform 160ms ease;
}

.dialog-content[data-state="open"] {
  opacity: 1;
  transform: translate(-50%, -50%) scale(1);
}

.dialog-content[data-state="closed"] {
  opacity: 0;
  transform: translate(-50%, -50%) scale(0.98);
}

.sheet-overlay {
  opacity: 0;
  transition: opacity 160ms ease;
}

.sheet-overlay[data-state="open"] {
  opacity: 1;
}

.sheet-overlay[data-state="closed"] {
  opacity: 0;
}

.sheet-content {
  opacity: 0;
  transform: translateX(100%);
  transition:
    opacity 160ms ease,
    transform 160ms ease;
  will-change: transform, opacity;
}

.sheet-content[data-side="left"] {
  transform: translateX(-100%);
}

.sheet-content[data-state="open"] {
  opacity: 1;
  transform: translateX(0);
}

.sheet-content[data-state="closed"] {
  opacity: 0;
}

@keyframes vsm-popover-in {
  from {
    opacity: 0;
    transform: translate(var(--vsm-enter-x, 0px), var(--vsm-enter-y, -4px));
  }
  to {
    opacity: 1;
    transform: translate(0, 0);
  }
}

@keyframes vsm-popover-out {
  from {
    opacity: 1;
    transform: translate(0, 0);
  }
  to {
    opacity: 0;
    transform: translate(var(--vsm-exit-x, 0px), var(--vsm-exit-y, -2px));
  }
}

.vsm-popover-content {
  --vsm-enter-x: 0px;
  --vsm-enter-y: -5px;
  --vsm-exit-x: 0px;
  --vsm-exit-y: -3px;
  will-change: transform, opacity;
}

.vsm-popover-content[data-side="top"] {
  --vsm-enter-y: 5px;
  --vsm-exit-y: 3px;
}

.vsm-popover-content[data-side="bottom"] {
  --vsm-enter-y: -5px;
  --vsm-exit-y: -3px;
}

.vsm-popover-content[data-side="left"] {
  --vsm-enter-x: 6px;
  --vsm-enter-y: 0px;
  --vsm-exit-x: 3px;
  --vsm-exit-y: 0px;
}

.vsm-popover-content[data-side="right"] {
  --vsm-enter-x: -6px;
  --vsm-enter-y: 0px;
  --vsm-exit-x: -3px;
  --vsm-exit-y: 0px;
}

.vsm-popover-content[data-state="open"] {
  animation: vsm-popover-in 140ms cubic-bezier(0.2, 0, 0, 1);
}

.vsm-popover-content[data-state="closed"] {
  animation: vsm-popover-out 120ms cubic-bezier(0.2, 0, 0, 1);
}

.glass-noise::before {
  content: "";
  pointer-events: none;
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background-image: radial-gradient(rgba(255, 255, 255, 0.2) 0.8px, transparent 0.8px);
  background-size: 3px 3px;
  opacity: 0.2;
}

.vsm-public-bg::before {
  content: "";
  pointer-events: none;
  position: absolute;
  inset: 0;
  background:
    radial-gradient(
      circle at 18% 20%,
      color-mix(in srgb, var(--accent) 9%, transparent),
      transparent 52%
    ),
    radial-gradient(circle at 86% 10%, rgba(255, 255, 255, 0.16), transparent 58%);
  opacity: 0.48;
  transform: translate3d(0, 0, 0);
  animation: vsm-ambient-float 26s ease-in-out infinite alternate;
}

.vsm-public-bg::after {
  content: "";
  pointer-events: none;
  position: absolute;
  inset: 0;
  background-image: radial-gradient(rgba(255, 255, 255, 0.18) 0.7px, transparent 0.7px);
  background-size: 3px 3px;
  opacity: 0.08;
}

.vsm-public-bg {
  /* Prevent decorative background layers from extending the scrollable area. */
  overflow: hidden;
}

[data-theme="light"] .vsm-marketing-bg {
  background:
    radial-gradient(circle at 16% 12%, rgba(17, 24, 39, 0.08), transparent 52%),
    radial-gradient(circle at 84% 0%, rgba(17, 24, 39, 0.06), transparent 54%),
    linear-gradient(
      160deg,
      rgba(247, 248, 251, 0.92) 0%,
      rgba(235, 238, 245, 0.86) 55%,
      rgba(227, 231, 240, 0.9) 100%
    );
}

[data-theme="dark"] .vsm-marketing-bg,
[data-theme="gray"] .vsm-marketing-bg {
  /* Marketing pages use a neutral enterprise palette (no neon blue/pink). */
  background:
    radial-gradient(circle at 18% 18%, rgba(255, 255, 255, 0.05), transparent 54%),
    radial-gradient(
      circle at 88% 6%,
      color-mix(in srgb, var(--accent) 18%, transparent),
      transparent 58%
    ),
    radial-gradient(circle at 62% 120%, rgba(255, 255, 255, 0.04), transparent 60%),
    linear-gradient(160deg, #090a0c 0%, #0b0c10 48%, #060607 100%);
}

.vsm-marketing-bg::before {
  content: "";
  pointer-events: none;
  position: absolute;
  /* Prevent pseudo-element overflow from extending the scrollable area. */
  inset: 0;
  background:
    radial-gradient(circle at 24% 22%, rgba(255, 255, 255, 0.06), transparent 56%),
    radial-gradient(
      circle at 72% 10%,
      color-mix(in srgb, var(--accent) 12%, transparent),
      transparent 64%
    );
  opacity: 0.42;
  transform: translate3d(0, 0, 0);
  animation: vsm-ambient-float 28s ease-in-out infinite alternate;
}

.vsm-marketing-bg::after {
  content: "";
  pointer-events: none;
  position: absolute;
  inset: 0;
  background-image: radial-gradient(rgba(255, 255, 255, 0.16) 0.7px, transparent 0.7px);
  background-size: 3px 3px;
  opacity: 0.045;
}

[data-theme="dark"] .vsm-landing-immersive .vsm-marketing-bg,
[data-theme="gray"] .vsm-landing-immersive .vsm-marketing-bg {
  background:
    radial-gradient(
      150% 120% at 50% 122%,
      rgba(58, 106, 188, 0.2) 0%,
      rgba(34, 62, 114, 0.12) 38%,
      transparent 74%
    ),
    linear-gradient(180deg, #06070b 0%, #070910 58%, #060810 100%);
  background-size: 120% 120%, 100% 100%;
  background-position: 50% 118%, 50% 50%;
  animation: vsm-landing-base-shift 34s ease-in-out infinite alternate;
}

.vsm-landing-immersive .vsm-marketing-bg::before {
  background: none;
  opacity: 0 !important;
  animation: none !important;
}

.vsm-landing-immersive .vsm-marketing-bg::after {
  background: none;
  opacity: 0 !important;
  animation: none !important;
}

[data-theme="dark"] .vsm-landing-immersive,
[data-theme="gray"] .vsm-landing-immersive {
  overflow-x: clip;
}

.vsm-landing-immersive .vsm-marketing-bg {
  position: fixed;
  inset: 0;
}

.vsm-landing-immersive .vsm-marketing-bg::after {
  opacity: 0;
}

.vsm-docs-surface .vsm-marketing-bg {
  background:
    radial-gradient(circle at 26% 118%, rgba(44, 88, 164, 0.24), transparent 48%),
    radial-gradient(circle at 82% 112%, rgba(72, 101, 174, 0.18), transparent 46%),
    linear-gradient(180deg, #06070b 0%, #070910 72%, #06070d 100%);
}

.vsm-docs-surface .vsm-marketing-bg::before {
  background:
    radial-gradient(circle at 20% 110%, rgba(98, 152, 234, 0.15), transparent 44%),
    radial-gradient(circle at 78% 104%, rgba(115, 130, 229, 0.13), transparent 42%);
  opacity: 0.28;
  animation: vsm-docs-atmosphere-a 52s ease-in-out infinite alternate;
}

.vsm-docs-surface .vsm-marketing-bg::after {
  opacity: 0.038;
  animation: vsm-docs-atmosphere-b 58s ease-in-out infinite alternate;
}

[data-theme="light"] .vsm-marketing-bg::after {
  opacity: 0.08;
}

[data-theme="dark"] .vsm-marketing-bg,
[data-theme="gray"] .vsm-marketing-bg,
[data-theme="light"] .vsm-marketing-bg {
  /* Background layers should never create a scrollable overflow region. */
  overflow: hidden;
}

[data-theme="dark"] .vsm-public-bg::before {
  opacity: 0.22;
}

[data-theme="dark"] .vsm-public-bg::after {
  opacity: 0.045;
  background-image: radial-gradient(rgba(255, 255, 255, 0.14) 0.7px, transparent 0.7px);
}

@keyframes vsm-ambient-float {
  from {
    transform: translate3d(-1.5%, 0.8%, 0);
  }
  to {
    transform: translate3d(1.8%, -1.2%, 0);
  }
}

@keyframes vsm-headline-shimmer-sweep {
  0% {
    opacity: 0;
    left: -120%;
  }
  12% {
    opacity: 0.18;
  }
  42% {
    opacity: 0.28;
  }
  86% {
    opacity: 0.14;
    left: 128%;
  }
  100% {
    opacity: 0;
    left: 140%;
  }
}

@keyframes vsm-landing-base-shift {
  0% {
    background-position: 48% 118%, 50% 50%;
    filter: hue-rotate(-4deg) saturate(102%);
  }
  50% {
    background-position: 52% 114%, 50% 50%;
    filter: hue-rotate(4deg) saturate(108%);
  }
  100% {
    background-position: 50% 120%, 50% 50%;
    filter: hue-rotate(8deg) saturate(106%);
  }
}

@keyframes vsm-landing-atmosphere-drift-a {
  from {
    transform: translate3d(-1.4%, 1.2%, 0) scale(1);
    background-position: 50% 106%;
    filter: hue-rotate(-6deg) saturate(104%);
  }
  to {
    transform: translate3d(1.8%, -1%, 0) scale(1.03);
    background-position: 52% 102%;
    filter: hue-rotate(6deg) saturate(110%);
  }
}

@keyframes vsm-landing-atmosphere-drift-b {
  from {
    transform: translate3d(1.8%, 1%, 0) scale(1);
    background-position: 50% 114%, 84% 108%;
    filter: hue-rotate(4deg) saturate(104%);
  }
  to {
    transform: translate3d(-2%, -1.5%, 0) scale(1.03);
    background-position: 54% 110%, 78% 104%;
    filter: hue-rotate(-10deg) saturate(111%);
  }
}

@keyframes vsm-landing-layer-a {
  0% {
    transform: translate3d(-2%, 3%, 0) scale(1);
    opacity: 0.42;
    filter: blur(44px) hue-rotate(-8deg);
  }
  50% {
    transform: translate3d(2%, 1%, 0) scale(1.06);
    opacity: 0.52;
    filter: blur(46px) hue-rotate(4deg);
  }
  100% {
    transform: translate3d(4%, -2%, 0) scale(1.1);
    opacity: 0.46;
    filter: blur(44px) hue-rotate(10deg);
  }
}

@keyframes vsm-landing-layer-b {
  0% {
    transform: translate3d(2%, 2%, 0) scale(1.02);
    opacity: 0.36;
    filter: blur(52px) hue-rotate(10deg);
  }
  50% {
    transform: translate3d(-2%, -1%, 0) scale(1.08);
    opacity: 0.47;
    filter: blur(54px) hue-rotate(-6deg);
  }
  100% {
    transform: translate3d(-5%, -2%, 0) scale(1.12);
    opacity: 0.41;
    filter: blur(52px) hue-rotate(12deg);
  }
}

@keyframes vsm-landing-layer-c {
  0% {
    background-position: 0% 35%;
    opacity: 0.22;
    filter: hue-rotate(-8deg) saturate(104%);
  }
  50% {
    background-position: 56% 58%;
    opacity: 0.35;
    filter: hue-rotate(6deg) saturate(116%);
  }
  100% {
    background-position: 100% 72%;
    opacity: 0.27;
    filter: hue-rotate(14deg) saturate(109%);
  }
}

@keyframes vsm-docs-atmosphere-a {
  0% {
    transform: translate3d(-1%, 1%, 0) scale(1);
    filter: hue-rotate(-3deg);
  }
  100% {
    transform: translate3d(1.5%, -1%, 0) scale(1.03);
    filter: hue-rotate(8deg);
  }
}

@keyframes vsm-docs-atmosphere-b {
  0% {
    transform: translate3d(1%, 0.5%, 0) scale(1);
  }
  100% {
    transform: translate3d(-1%, -0.8%, 0) scale(1.02);
  }
}

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.001ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.001ms !important;
    scroll-behavior: auto !important;
  }
}
